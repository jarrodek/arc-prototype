<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/paper-styles.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input-container.html">
<link rel="import" href="../../bower_components/iron-input/iron-input.html">

<link rel="import" href="../payload-parser-behavior/payload-parser-behavior.html">

<dom-module id="form-data-editor">
  <template>
    <style>
    :host {
      display: block;
    }

    input::-webkit-input-placeholder {
      color: var(--paper-input-container-color, --secondary-text-color);
    }

    .params-title {
      @apply(--paper-font-caption);
      color: #737373;
    }

    .form-row {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
      @apply(--layout-center);
    }

    .param-name {
      margin-right: 12px;
    }

    .param-value {
      @apply(--layout-flex);
    }

    .encoder-buttons {
      margin: 8px 0;
    }

    .add-param-button {
      margin-top: 12px;
    }

    .form-info {
      @apply(--layout-horizontal);
      @apply(--layout-flex);
      @apply(--layout-center-center);
    }

    .form-info> div {
      @apply(--layout-vertical);
    }
    </style>
    <div hidden$="[[!withForm]]">
      <div class="encoder-buttons">
        <paper-button title="Encodes payload to x-www-form-urlencoded data" on-tap="encodePaylod">encode payload</paper-button>
        <paper-button title="Decodes payload to human readable form" on-tap="decodePaylod">decode payload</paper-button>
      </div>
      <label class="params-title">Form data for x-www-form-urlencoded parameters</label>
      <template is="dom-repeat" id="valuesList" items="{{valuesList}}" on-dom-change="_onParamsRender">
        <div class="form-row">
          <paper-input-container class="param-name" no-label-float inline>
            <input is="iron-input" type="text" value="{{item.name::input}}" placeholder="Param name" />
          </paper-input-container>
          <paper-input-container class="param-value" no-label-float inline>
            <input is="iron-input" type="text" value="{{item.value::input}}" placeholder="Param value" />
          </paper-input-container>
          <paper-icon-button icon="close" title="Remove param" on-tap="_removeParam"></paper-icon-button>
        </div>
      </template>
      <paper-button raised on-tap="appendEmptyParam" class="add-param-button">Add another parameter</paper-button>
    </div>
    <div hidden$="[[withForm]]" class="form-info">
      <div>
        <p>This form is only applicable for the 'x-www-form-urlencoded' content type.</p>
        <paper-button raised on-tap="_updateContentType" data-ct="application/x-www-form-urlencoded">Use x-www-form-urlencoded</paper-button>
      </div>
    </div>
  </template>
</dom-module>
<script src="form-data-editor.js"></script>
