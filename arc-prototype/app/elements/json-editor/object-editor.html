<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="object-editor">
  <template>
    <style>
    :host {
      display: block;
    }
    paper-input {
      display: inline-block;
    }
    paper-icon-button {
      width: 32px;
      height: 32px;
    }
    .indention {
      margin-left: 12px;
    }
    </style>
    <div class="key-line">
      <span hidden$="[[noKey]]">
        <span>&quot;</span>
        <paper-input label="key name" no-label-float value="{{value.name}}"></paper-input>
        <span>&quot;</span>
        <span>:</span>
      </span>
      <template is="dom-if" if="[[isObject]]">
        <div>{</div>
        <div class="indention">
          <template is="dom-repeat" items="[[childrenObjects]]" id="objectRepeater">
            <object-editor value="{{item}}" on-remove-value="_deepRemove"></object-editor>
          </template>
          <div class="add-action">
            <paper-button on-tap="_insertObject">add</paper-button>
          </div>
        </div>
        <div>
          <span>}</span>
          <paper-icon-button icon="arc:more-vert"></paper-icon-button>
          <paper-icon-button icon="arc:remove-circle-outline" on-tap="_remove"></paper-icon-button>
        </div>
      </template>

      <span hidden$="[[isObject]]">
        <span>&quot;</span>
        <template is="dom-if" if="[[isObject]]">
          <object-editor value="{{value.value}}"></object-editor>
        </template>
        <template is="dom-if" if="[[isString]]">
          <paper-input label="value" no-label-float value="{{value.value.value}}" type="string"></paper-input>
        </template>
        <template is="dom-if" if="[[isInteger]]">
          <paper-input label="value" no-label-float value="{{value.value.value}}" type="number" step="1"></paper-input>
        </template>
        <template is="dom-if" if="[[isFloat]]">
          <paper-input label="value" no-label-float value="{{value.value.value}}" type="number" step="0.01"></paper-input>
        </template>
        <template is="dom-if" if="[[isBoolean]]">
          <paper-dropdown-menu no-label-float label="Boolean value" >
            <paper-listbox class="dropdown-content" selected="{{value.value.value}}" attr-for-selected="data-value">
              <template is="dom-repeat" items="[[booleanValues]]">
                <paper-item data-value="[[item.value]]">[[item.display]]</paper-item>
              </template>
            </paper-listbox>
          </paper-dropdown-menu>
        </template>
        <!-- <paper-input label="value" no-label-float value="{{value.value.value}}" type="[[value.value.type]]"></paper-input> -->
        <span>&quot;</span>
        <paper-icon-button icon="arc:more-vert"></paper-icon-button>
        <paper-icon-button icon="arc:remove-circle-outline" on-tap="_remove"></paper-icon-button>
      </span>
    </div>
    <div class="value-line"></div>
    <div class="end-line"></div>
  </template>
</dom-module>
<script src="object-editor.js"></script>
